<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="description" content="L-Game - Edward de Bono's strategisches Blockade-Spiel mit Premium Gaming UI">
    <title>L-Game - LogicCastle</title>
    
    <!-- L-Game Premium Gaming UI - Production CSS -->
    <link rel="stylesheet" href="css/tailwind-built.css">
</head>
<body>
    <!-- Header -->
    <header class="text-center text-white p-4 md:p-8">
        <h1 class="text-4xl md:text-5xl font-bold mb-2">üß© L-Game</h1>
        <p class="text-lg md:text-xl opacity-90">Edward de Bono's strategisches Blockade-Spiel</p>
        <nav class="mt-4">
            <a href="../../" class="lc-glass px-4 py-2 rounded-lg text-white hover:text-gray-200 transition-all duration-200">
                ‚Üê Zur√ºck zu LogicCastle
            </a>
        </nav>
    </header>

    <!-- Main Game Container -->
    <main class="max-w-7xl mx-auto p-4 md:p-8">
        <div class="grid grid-cols-1 xl:grid-cols-4 gap-6">
            
            <!-- Game Board Section -->
            <div class="xl:col-span-3">
                <div class="lc-glass rounded-2xl p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-white">Spielbrett</h2>
                        <div class="text-right">
                            <div class="text-sm text-gray-300">Aktueller Spieler:</div>
                            <div id="current-player" class="text-lg font-bold text-violet-400">Player1</div>
                        </div>
                    </div>
                    
                    <!-- 4x4 L-Game Board with Premium Glassmorphism -->
                    <div class="flex justify-center mb-6">
                        <div id="gameBoard" class="lgame-board">
                            <!-- Board cells will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Game Controls -->
                    <div class="flex flex-wrap gap-3 justify-center">
                        <button id="reset-game" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-200">
                            üîÑ Spiel zur√ºcksetzen
                        </button>
                        <button id="undo-move" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-200">
                            ‚Ü∂ Zug r√ºckg√§ngig
                        </button>
                        <button id="suggest-move" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-200">
                            ü§ñ Zug vorschlagen
                        </button>
                        <button id="debug-info" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-all duration-200">
                            üêõ Debug Info
                        </button>
                    </div>
                </div>
                
                <!-- Game Statistics -->
                <div class="lc-glass rounded-xl p-4">
                    <h3 class="text-lg font-bold text-white mb-3">üìä Spielstatistiken</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <div class="text-center">
                            <div class="text-gray-300">Z√ºge gespielt</div>
                            <div id="move-count" class="text-xl font-bold text-violet-400">0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-300">G√ºltige Z√ºge</div>
                            <div id="valid-moves-count" class="text-xl font-bold text-emerald-400">-</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-300">√ò Zugzeit</div>
                            <div id="avg-move-time" class="text-xl font-bold text-cyan-400">-</div>
                        </div>
                        <div class="text-center">
                            <div class="text-gray-300">Speicher</div>
                            <div id="memory-usage" class="text-xl font-bold text-orange-400">-</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Game Info Sidebar -->
            <div class="space-y-6">
                
                <!-- Game Status -->
                <div class="lc-glass rounded-xl p-4">
                    <h3 class="text-lg font-bold text-white mb-3">üéÆ Spielstatus</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-300">Status:</span>
                            <span id="game-status" class="font-bold text-emerald-400">L√§uft</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">L-St√ºck Orientierung:</span>
                            <span id="orientation-display" class="font-bold text-violet-400">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Engine:</span>
                            <span id="engine-status" class="font-bold text-blue-400">WASM</span>
                        </div>
                    </div>
                </div>
                
                <!-- Player Assistance (will be populated by AssistanceManager) -->
                <div id="assistance-controls">
                    <!-- Assistance controls will be inserted here -->
                </div>
                
                <!-- Keyboard Controls (will be populated by KeyboardController) -->
                <div id="keyboard-help">
                    <!-- Keyboard help will be inserted here -->
                </div>
                
                <!-- Spielregeln -->
                <div class="lc-glass rounded-xl p-4">
                    <h3 class="text-lg font-bold text-white mb-3">üìñ Spielregeln</h3>
                    <div class="text-sm text-gray-300 space-y-2">
                        <p><strong>Ziel:</strong> Blockiere deinen Gegner, sodass er sein L-St√ºck nicht mehr bewegen kann.</p>
                        <p><strong>Zug:</strong> 1) L-St√ºck zu neuer Position bewegen (Pflicht) 2) Neutralen Stein bewegen (optional)</p>
                        <p><strong>Gewinn:</strong> Der Spieler gewinnt, dessen Gegner blockiert ist.</p>
                        <p><strong>L-St√ºck:</strong> 8 Orientierungen m√∂glich (4 Drehungen √ó 2 Spiegelungen)</p>
                    </div>
                </div>
                
                <!-- Move History -->
                <div class="lc-glass rounded-xl p-4">
                    <h3 class="text-lg font-bold text-white mb-3">üìú Zughistorie</h3>
                    <div id="move-history" class="text-sm text-gray-300 max-h-32 overflow-y-auto">
                        <p class="text-gray-400 italic">Noch keine Z√ºge gespielt</p>
                    </div>
                </div>
                
                <!-- System Status -->
                <div class="lc-glass rounded-xl p-4">
                    <h3 class="text-lg font-bold text-white mb-3">üîß System Status</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-300">WASM Engine:</span>
                            <span id="wasm-status" class="font-bold text-yellow-400">Loading...</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Game Engine:</span>
                            <span id="game-engine-status" class="font-bold text-yellow-400">Initializing...</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-300">Components:</span>
                            <span id="components-status" class="font-bold text-gray-400">0/11</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="lc-glass rounded-2xl p-8 max-w-md mx-4 text-center">
            <div class="w-16 h-16 border-4 border-violet-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <h2 class="text-xl font-bold text-white mb-2">L-Game wird geladen...</h2>
            <p class="text-gray-300">WASM Engine wird initialisiert</p>
            <div id="loading-progress" class="mt-4 text-sm text-gray-400"></div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="lc-glass rounded-2xl p-8 max-w-md mx-4">
            <h2 class="text-xl font-bold text-red-400 mb-4">‚ùå Fehler beim Laden</h2>
            <p id="error-message" class="text-gray-300 mb-4"></p>
            <div class="flex justify-end space-x-3">
                <button id="retry-button" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-colors">
                    üîÑ Erneut versuchen
                </button>
                <button id="close-error" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-colors">
                    Schlie√üen
                </button>
            </div>
        </div>
    </div>

    <!-- Victory Modal -->
    <div id="victory-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="lc-glass rounded-2xl p-8 max-w-md mx-4 text-center">
            <div class="text-6xl mb-4">üèÜ</div>
            <h2 class="text-2xl font-bold text-yellow-400 mb-2">Gewonnen!</h2>
            <p id="victory-message" class="text-gray-300 mb-6">Herzlichen Gl√ºckwunsch!</p>
            <div class="flex justify-center space-x-3">
                <button id="new-game-victory" class="lc-glass px-6 py-3 rounded-lg text-white hover:bg-white/20 transition-colors">
                    üÜï Neues Spiel
                </button>
                <button id="close-victory" class="lc-glass px-4 py-2 rounded-lg text-white hover:bg-white/20 transition-colors">
                    Schlie√üen
                </button>
            </div>
        </div>
    </div>

    <!-- L-Game Production JavaScript Module -->
    <script type="module">
        import { LGameMainController } from './js/LGameMainController.js';
        
        // Initialize L-Game with all components
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                window.lgameController = new LGameMainController();
                await window.lgameController.init();
                
                console.log('üéÆ L-Game Production successfully initialized');
                
                // Hide loading overlay
                document.getElementById('loading-overlay').style.display = 'none';
                
            } catch (error) {
                console.error('‚ùå L-Game initialization failed:', error);
                
                // Show error modal
                document.getElementById('loading-overlay').style.display = 'none';
                document.getElementById('error-modal').style.display = 'flex';
                document.getElementById('error-message').textContent = error.message;
                
                // Retry button handler
                document.getElementById('retry-button').addEventListener('click', () => {
                    window.location.reload();
                });
                
                // Close error handler
                document.getElementById('close-error').addEventListener('click', () => {
                    document.getElementById('error-modal').style.display = 'none';
                });
            }
        });
    </script>
</body>
</html>