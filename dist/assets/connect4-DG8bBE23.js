const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseGameUI-B3-5pT0q.js","assets/preload-helper-DDWtIbF5.js","assets/game-CEJv9Ek5.js","assets/game_engine-DD1aZRKp.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-B5Qt9EMX.js";import{BaseGameUI as B}from"./BaseGameUI-B3-5pT0q.js";import{BoardRenderer as E}from"./BoardRenderer-qmcA1BJL.js";import{Connect4GameBitPacked as M}from"./game-CEJv9Ek5.js";import{createConnect4Config as S}from"./connect4-config-4khcFxLH.js";import{_ as w}from"./preload-helper-DDWtIbF5.js";import"./game_engine-DD1aZRKp.js";class C extends B{constructor(){const t=S("two-player"),n=new M;super(n,t),this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.scores={yellow:0,red:0},this.boardRenderer=null}async init(){try{await this.wasmGame.init()}catch{}return await super.init(),this.initializeBoardRenderer(),this.createBoard(),this.setupEventListeners(),this.updateUI(),!0}initializeBoardRenderer(){const t=document.getElementById("gameBoard"),n=document.getElementById("topCoords"),s=document.getElementById("bottomCoords");t&&(this.boardRenderer=new E(t,n,s))}createBoard(){this.boardRenderer?this.boardRenderer.initializeBoard()?this.boardRenderer.createCoordinateLabels():this.fallbackCreateBoard():this.fallbackCreateBoard()}fallbackCreateBoard(){const t=document.getElementById("gameBoard");if(t){t.innerHTML="";for(let n=0;n<6;n++)for(let s=0;s<7;s++){const d=document.createElement("div");d.className="game-slot relative bg-blue-500 rounded-full border-2 border-blue-700 cursor-pointer aspect-square flex items-center justify-center",d.dataset.row=n,d.dataset.col=s;const m=document.createElement("div");m.className="disc empty w-[85%] h-[85%] rounded-full",d.appendChild(m),t.appendChild(d)}}}setupEventListeners(){document.getElementById("gameBoard").addEventListener("click",t=>{const n=t.target.closest(".game-slot");if(n&&!this.gameOver){const s=parseInt(n.dataset.col);this.makeMove(s)}}),document.querySelectorAll(".coord").forEach((t,n)=>{t.addEventListener("click",()=>{this.gameOver||this.makeMove(n)})}),document.getElementById("newGameBtn").addEventListener("click",()=>{this.resetGame()}),document.getElementById("undoBtn").addEventListener("click",()=>{this.undoMove()}),document.getElementById("resetScoreBtn").addEventListener("click",()=>{this.resetScore()}),document.getElementById("helpBtn").addEventListener("click",()=>{this.showModal("helpModal")}),document.getElementById("assistanceBtn").addEventListener("click",()=>{this.showModal("assistanceModal")}),document.getElementById("closeHelpModal").addEventListener("click",()=>{this.hideModal("helpModal")}),document.getElementById("closeAssistanceModal").addEventListener("click",()=>{this.hideModal("assistanceModal")}),document.addEventListener("keydown",t=>{if(t.key>="1"&&t.key<="7"&&!this.gameOver){const n=parseInt(t.key)-1;this.makeMove(n)}else t.key==="n"||t.key==="N"?this.resetGame():t.key==="u"||t.key==="U"?this.undoMove():t.key==="F1"?(t.preventDefault(),this.toggleModal("helpModal")):t.key==="F2"?(t.preventDefault(),this.toggleModal("assistanceModal")):t.key==="F3"?(t.preventDefault(),this.resetScore()):t.key==="Escape"&&(this.hideModal("helpModal"),this.hideModal("assistanceModal"))}),document.getElementById("helpModal").addEventListener("click",t=>{t.target.id==="helpModal"&&this.hideModal("helpModal")}),document.getElementById("assistanceModal").addEventListener("click",t=>{t.target.id==="assistanceModal"&&this.hideModal("assistanceModal")})}makeMove(t){if(this.gameOver||t<0||t>=7)return!1;if(this.wasmGame&&this.wasmGame.initialized)try{const n=this.wasmGame.makeMove(t);this.board=n.board,this.currentPlayer=n.player===1?2:1,this.moveCount=n.moveNumber,this.gameOver=n.isGameOver,this.winner=n.winner;const s=this.findMoveRow(t,n.board);return s!==-1&&this.updateCell(s,t,n.player),n.isGameOver&&(n.winner?(this.showWin(s,t),this.updateScore()):this.showDraw()),this.updateUI(),!0}catch{}return this.legacyMakeMove(t)}findMoveRow(t,n){for(let s=5;s>=0;s--)if(n[s][t]!==0)return s;return-1}legacyMakeMove(t){let n=-1;for(let s=5;s>=0;s--)if(this.board[s][t]===0){n=s;break}return n===-1?!1:(this.gameHistory.push({row:n,col:t,player:this.currentPlayer,board:this.board.map(s=>[...s])}),this.board[n][t]=this.currentPlayer,this.moveCount++,this.updateCell(n,t,this.currentPlayer),this.checkWin(n,t)?(this.gameOver=!0,this.winner=this.currentPlayer,this.showWin(n,t),this.updateScore()):this.moveCount===42?(this.gameOver=!0,this.winner=0,this.showDraw()):this.currentPlayer=this.currentPlayer===1?2:1,this.updateUI(),!0)}checkWin(t,n){const s=this.board[t][n],d=[[0,1],[1,0],[1,1],[1,-1]];for(const[m,l]of d){let e=1;const o=[[t,n]];for(let r=1;r<4;r++){const a=t+r*m,c=n+r*l;if(a>=0&&a<6&&c>=0&&c<7&&this.board[a][c]===s)e++,o.push([a,c]);else break}for(let r=1;r<4;r++){const a=t-r*m,c=n-r*l;if(a>=0&&a<6&&c>=0&&c<7&&this.board[a][c]===s)e++,o.push([a,c]);else break}if(e>=4)return this.winningLine=o,!0}return!1}updateCell(t,n,s){if(this.boardRenderer)this.boardRenderer.updateBoardVisual(t,n,s);else{const d=document.querySelector(`[data-row="${t}"][data-col="${n}"]`);if(d){const m=d.querySelector(".disc");m&&(m.classList.remove("empty","yellow","red"),m.classList.add(s===1?"yellow":"red"))}}}showWin(t,n){const s=this.currentPlayer===1?"Spieler 1 (Gelb)":"Spieler 2 (Rot)";this.winningLine&&this.winningLine.forEach(([m,l])=>{const e=document.querySelector(`[data-row="${m}"][data-col="${l}"]`);if(e){const o=e.querySelector(".disc");o&&o.classList.add("winning-disc")}});const d=document.getElementById("gameStatus");d&&(d.textContent=`${s} gewinnt!`,d.className="font-semibold text-yellow-400")}showDraw(){const t=document.getElementById("gameStatus");t&&(t.textContent="Unentschieden!",t.className="font-semibold text-gray-400")}updateScore(){this.winner===1?this.scores.yellow++:this.winner===2&&this.scores.red++,document.getElementById("yellowScore").textContent=this.scores.yellow,document.getElementById("redScore").textContent=this.scores.red}resetScore(){this.scores={yellow:0,red:0},document.getElementById("yellowScore").textContent="0",document.getElementById("redScore").textContent="0"}undoMove(){if(this.wasmGame&&this.wasmGame.initialized&&this.wasmGame.canUndo())try{const t=this.wasmGame.undoMove();return this.board=t.currentState.board,this.currentPlayer=t.currentState.currentPlayer,this.moveCount=t.currentState.moveCount,this.gameOver=t.currentState.isGameOver,this.winner=t.currentState.winner,this.updateBoardFromState(),this.updateUI(),!0}catch{}return this.legacyUndoMove()}legacyUndoMove(){if(this.gameHistory.length===0)return!1;const t=this.gameHistory.pop();return this.board=t.board,this.currentPlayer=t.player,this.moveCount--,this.gameOver=!1,this.winner=null,this.updateBoardFromState(),this.updateUI(),!0}updateBoardFromState(){for(let t=0;t<6;t++)for(let n=0;n<7;n++){const s=document.querySelector(`[data-row="${t}"][data-col="${n}"]`);if(s){const d=s.querySelector(".disc");d&&(d.classList.remove("empty","yellow","red","winning-disc"),this.board[t][n]===0?d.classList.add("empty"):this.board[t][n]===1?d.classList.add("yellow"):this.board[t][n]===2&&d.classList.add("red"))}}}resetGame(){if(this.wasmGame&&this.wasmGame.initialized)try{this.wasmGame.newGame(),this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.winningLine=null}catch{}else this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.winningLine=null;this.boardRenderer?this.boardRenderer.clearBoard():document.querySelectorAll(".game-slot").forEach(n=>{const s=n.querySelector(".disc");s&&(s.classList.remove("yellow","red","winning-disc"),s.classList.add("empty"))}),this.updateUI()}updateUI(){const t=document.getElementById("currentPlayerIndicator");if(t){const d=t.querySelector(".player-disc"),m=t.querySelector(".player-name");d&&m&&(this.currentPlayer===1?(d.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-yellow-400 to-yellow-600 shadow-lg",m.textContent="Spieler 1"):(d.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-red-500 to-red-700 shadow-lg",m.textContent="Spieler 2"))}const n=document.getElementById("moveCounter");if(n&&(n.textContent=this.moveCount),!this.gameOver){const d=document.getElementById("gameStatus");d&&(d.textContent="Spiel lÃ¤uft",d.className="font-semibold text-green-400")}const s=document.getElementById("undoBtn");s&&(s.disabled=this.gameHistory.length===0)}showModal(t){const n=document.getElementById(t);n&&(n.classList.remove("hidden"),document.body.style.overflow="hidden")}hideModal(t){const n=document.getElementById(t);n&&(n.classList.add("hidden"),document.body.style.overflow="")}toggleModal(t){const n=document.getElementById(t);n&&(n.classList.contains("hidden")?this.showModal(t):this.hideModal(t))}}(async()=>{try{const i=new C;await i.init(),window.game=i}catch(i){const t=document.createElement("div");t.style.cssText="position: fixed; top: 20px; left: 20px; right: 20px; background: #f44336; color: white; padding: 15px; border-radius: 8px; z-index: 1000; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);",t.textContent=`STEP 3 Error: ${i.message}`,document.body.appendChild(t)}})();try{const{BaseGameUI:i}=await w(async()=>{const{BaseGameUI:l}=await import("./BaseGameUI-B3-5pT0q.js");return{BaseGameUI:l}},__vite__mapDeps([0,1])),{CONNECT4_UI_CONFIG:t,createConnect4Config:n}=await w(async()=>{const{CONNECT4_UI_CONFIG:l,createConnect4Config:e}=await import("./connect4-config-4khcFxLH.js");return{CONNECT4_UI_CONFIG:l,createConnect4Config:e}},[]),{BoardRenderer:s}=await w(async()=>{const{BoardRenderer:l}=await import("./BoardRenderer-qmcA1BJL.js");return{BoardRenderer:l}},[]),{Connect4GameBitPacked:d}=await w(async()=>{const{Connect4GameBitPacked:l}=await import("./game-CEJv9Ek5.js");return{Connect4GameBitPacked:l}},__vite__mapDeps([2,3]));class m extends i{constructor(){const e=n("two-player");this.wasmGame=new d,super(this.wasmGame,e),this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.scores={yellow:0,red:0},this.boardRenderer=null}async init(){try{await this.wasmGame.init()}catch{}return await super.init(),this.initializeBoardRenderer(),this.createBoard(),this.setupEventListeners(),this.updateUI(),!0}initializeBoardRenderer(){const e=document.getElementById("gameBoard"),o=document.getElementById("topCoords"),r=document.getElementById("bottomCoords");e&&(this.boardRenderer=new s(e,o,r))}createBoard(){this.boardRenderer?this.boardRenderer.initializeBoard()?this.boardRenderer.createCoordinateLabels():this.fallbackCreateBoard():this.fallbackCreateBoard()}fallbackCreateBoard(){const e=document.getElementById("gameBoard");if(e){e.innerHTML="";for(let o=0;o<6;o++)for(let r=0;r<7;r++){const a=document.createElement("div");a.className="game-slot relative bg-blue-500 rounded-full border-2 border-blue-700 cursor-pointer aspect-square flex items-center justify-center",a.dataset.row=o,a.dataset.col=r;const c=document.createElement("div");c.className="disc empty w-[85%] h-[85%] rounded-full",a.appendChild(c),e.appendChild(a)}}}setupEventListeners(){document.getElementById("gameBoard").addEventListener("click",e=>{const o=e.target.closest(".game-slot");if(o&&!this.gameOver){const r=parseInt(o.dataset.col);this.makeMove(r)}}),document.querySelectorAll(".coord").forEach((e,o)=>{e.addEventListener("click",()=>{this.gameOver||this.makeMove(o)})}),document.getElementById("newGameBtn").addEventListener("click",()=>{this.resetGame()}),document.getElementById("undoBtn").addEventListener("click",()=>{this.undoMove()}),document.getElementById("resetScoreBtn").addEventListener("click",()=>{this.resetScore()}),document.getElementById("helpBtn").addEventListener("click",()=>{this.showModal("helpModal")}),document.getElementById("assistanceBtn").addEventListener("click",()=>{this.showModal("assistanceModal")}),document.getElementById("closeHelpModal").addEventListener("click",()=>{this.hideModal("helpModal")}),document.getElementById("closeAssistanceModal").addEventListener("click",()=>{this.hideModal("assistanceModal")}),document.addEventListener("keydown",e=>{if(e.key>="1"&&e.key<="7"&&!this.gameOver){const o=parseInt(e.key)-1;this.makeMove(o)}else e.key==="n"||e.key==="N"?this.resetGame():e.key==="u"||e.key==="U"?this.undoMove():e.key==="F1"?(e.preventDefault(),this.toggleModal("helpModal")):e.key==="F2"?(e.preventDefault(),this.toggleModal("assistanceModal")):e.key==="F3"?(e.preventDefault(),this.resetScore()):e.key==="Escape"&&(this.hideModal("helpModal"),this.hideModal("assistanceModal"))}),document.getElementById("helpModal").addEventListener("click",e=>{e.target.id==="helpModal"&&this.hideModal("helpModal")}),document.getElementById("assistanceModal").addEventListener("click",e=>{e.target.id==="assistanceModal"&&this.hideModal("assistanceModal")})}makeMove(e){if(this.gameOver||e<0||e>=7)return!1;if(this.wasmGame&&this.wasmGame.initialized)try{const o=this.wasmGame.makeMove(e);this.board=o.board,this.currentPlayer=o.player===1?2:1,this.moveCount=o.moveNumber,this.gameOver=o.isGameOver,this.winner=o.winner;const r=this.findMoveRow(e,o.board);return r!==-1&&this.updateCell(r,e,o.player),o.isGameOver&&(o.winner?(this.showWin(r,e),this.updateScore()):this.showDraw()),this.updateUI(),!0}catch{}return this.legacyMakeMove(e)}findMoveRow(e,o){for(let r=5;r>=0;r--)if(o[r][e]!==0)return r;return-1}legacyMakeMove(e){let o=-1;for(let r=5;r>=0;r--)if(this.board[r][e]===0){o=r;break}return o===-1?!1:(this.gameHistory.push({row:o,col:e,player:this.currentPlayer,board:this.board.map(r=>[...r])}),this.board[o][e]=this.currentPlayer,this.moveCount++,this.updateCell(o,e,this.currentPlayer),this.checkWin(o,e)?(this.gameOver=!0,this.winner=this.currentPlayer,this.showWin(o,e),this.updateScore()):this.moveCount===42?(this.gameOver=!0,this.winner=0,this.showDraw()):this.currentPlayer=this.currentPlayer===1?2:1,this.updateUI(),!0)}checkWin(e,o){const r=this.board[e][o],a=[[0,1],[1,0],[1,1],[1,-1]];for(const[c,p]of a){let h=1;const g=[[e,o]];for(let u=1;u<4;u++){const y=e+u*c,f=o+u*p;if(y>=0&&y<6&&f>=0&&f<7&&this.board[y][f]===r)h++,g.push([y,f]);else break}for(let u=1;u<4;u++){const y=e-u*c,f=o-u*p;if(y>=0&&y<6&&f>=0&&f<7&&this.board[y][f]===r)h++,g.push([y,f]);else break}if(h>=4)return this.winningLine=g,!0}return!1}updateCell(e,o,r){if(this.boardRenderer)this.boardRenderer.updateBoardVisual(e,o,r);else{const a=document.querySelector(`[data-row="${e}"][data-col="${o}"]`);if(a){const c=a.querySelector(".disc");c&&(c.classList.remove("empty","yellow","red"),c.classList.add(r===1?"yellow":"red"))}}}showWin(e,o){const r=this.currentPlayer===1?"Spieler 1 (Gelb)":"Spieler 2 (Rot)";this.winningLine&&this.winningLine.forEach(([c,p])=>{const h=document.querySelector(`[data-row="${c}"][data-col="${p}"]`);if(h){const g=h.querySelector(".disc");g&&g.classList.add("winning-disc")}});const a=document.getElementById("gameStatus");a&&(a.textContent=`${r} gewinnt!`,a.className="font-semibold text-yellow-400")}showDraw(){const e=document.getElementById("gameStatus");e&&(e.textContent="Unentschieden!",e.className="font-semibold text-gray-400")}updateScore(){this.winner===1?this.scores.yellow++:this.winner===2&&this.scores.red++,document.getElementById("yellowScore").textContent=this.scores.yellow,document.getElementById("redScore").textContent=this.scores.red}resetScore(){this.scores={yellow:0,red:0},document.getElementById("yellowScore").textContent="0",document.getElementById("redScore").textContent="0"}undoMove(){if(this.wasmGame&&this.wasmGame.initialized&&this.wasmGame.canUndo())try{const e=this.wasmGame.undoMove();return this.board=e.currentState.board,this.currentPlayer=e.currentState.currentPlayer,this.moveCount=e.currentState.moveCount,this.gameOver=e.currentState.isGameOver,this.winner=e.currentState.winner,this.updateBoardFromState(),this.updateUI(),!0}catch{}return this.legacyUndoMove()}legacyUndoMove(){if(this.gameHistory.length===0)return!1;const e=this.gameHistory.pop();return this.board=e.board,this.currentPlayer=e.player,this.moveCount--,this.gameOver=!1,this.winner=null,this.updateBoardFromState(),this.updateUI(),!0}updateBoardFromState(){for(let e=0;e<6;e++)for(let o=0;o<7;o++){const r=document.querySelector(`[data-row="${e}"][data-col="${o}"]`);if(r){const a=r.querySelector(".disc");a&&(a.classList.remove("empty","yellow","red","winning-disc"),this.board[e][o]===0?a.classList.add("empty"):this.board[e][o]===1?a.classList.add("yellow"):this.board[e][o]===2&&a.classList.add("red"))}}}resetGame(){if(this.wasmGame&&this.wasmGame.initialized)try{this.wasmGame.newGame(),this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.winningLine=null}catch{}else this.board=Array(6).fill(null).map(()=>Array(7).fill(0)),this.currentPlayer=1,this.gameOver=!1,this.winner=null,this.moveCount=0,this.gameHistory=[],this.winningLine=null;this.boardRenderer?this.boardRenderer.clearBoard():document.querySelectorAll(".game-slot").forEach(o=>{const r=o.querySelector(".disc");r&&(r.classList.remove("yellow","red","winning-disc"),r.classList.add("empty"))}),this.updateUI()}updateUI(){const e=document.getElementById("currentPlayerIndicator");if(e){const a=e.querySelector(".player-disc"),c=e.querySelector(".player-name");a&&c&&(this.currentPlayer===1?(a.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-yellow-400 to-yellow-600 shadow-lg",c.textContent="Spieler 1"):(a.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-red-500 to-red-700 shadow-lg",c.textContent="Spieler 2"))}const o=document.getElementById("moveCounter");if(o&&(o.textContent=this.moveCount),!this.gameOver){const a=document.getElementById("gameStatus");a&&(a.textContent="Spiel lÃ¤uft",a.className="font-semibold text-green-400")}const r=document.getElementById("undoBtn");r&&(r.disabled=this.gameHistory.length===0)}showModal(e){const o=document.getElementById(e);o&&(o.classList.remove("hidden"),document.body.style.overflow="hidden")}hideModal(e){const o=document.getElementById(e);o&&(o.classList.add("hidden"),document.body.style.overflow="")}toggleModal(e){const o=document.getElementById(e);o&&(o.classList.contains("hidden")?this.showModal(e):this.hideModal(e))}}document.addEventListener("DOMContentLoaded",async()=>{try{const l=new m;await l.init(),window.game=l}catch(l){const e=document.createElement("div");e.style.cssText="position: fixed; top: 20px; left: 20px; right: 20px; background: #f44336; color: white; padding: 15px; border-radius: 8px; z-index: 1000; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);",e.textContent=`STEP 3 Error: ${l.message}`,document.body.appendChild(e),v()}})}catch(i){const t=document.createElement("div");t.style.cssText="position: fixed; top: 20px; left: 20px; right: 20px; background: #f44336; color: white; padding: 15px; border-radius: 8px; z-index: 1000; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);",t.innerHTML=`
          <h3 style="margin: 0 0 10px 0;">â ï¸ Modular Import Failed</h3>
          <p style="margin: 0 0 10px 0;"><strong>Error:</strong> ${i.message}</p>
          <p style="margin: 0; font-size: 12px; opacity: 0.9;">Using minimal implementation for now.</p>
        `,document.body.appendChild(t),v()}function v(){const i={board:Array(6).fill(null).map(()=>Array(7).fill(0)),currentPlayer:1,gameOver:!1,winner:null,moveCount:0},t=document.getElementById("gameBoard");if(t){t.innerHTML="";for(let l=0;l<6;l++)for(let e=0;e<7;e++){const o=document.createElement("div");o.className="game-slot relative bg-blue-500 rounded-full border-2 border-blue-700 cursor-pointer aspect-square flex items-center justify-center",o.dataset.row=l,o.dataset.col=e;const r=document.createElement("div");r.className="disc empty w-[85%] h-[85%] rounded-full",r.style.background="rgba(255, 255, 255, 0.1)",r.style.border="1px solid rgba(255, 255, 255, 0.2)",o.appendChild(r),t.appendChild(o),o.addEventListener("click",()=>n(e))}}function n(l){if(i.gameOver||l<0||l>=7)return;let e=-1;for(let r=5;r>=0;r--)if(i.board[r][l]===0){e=r;break}if(e===-1)return;i.board[e][l]=i.currentPlayer,i.moveCount++;const o=document.querySelector(`[data-row="${e}"][data-col="${l}"]`);if(o){const r=o.querySelector(".disc");r&&(r.classList.remove("empty"),r.classList.add(i.currentPlayer===1?"yellow":"red"),i.currentPlayer===1?(r.style.background="linear-gradient(135deg, #FFD700, #FFA000)",r.style.border="3px solid #FF8F00",r.style.boxShadow="0 4px 12px rgba(255, 215, 0, 0.6)"):(r.style.background="linear-gradient(135deg, #F44336, #D32F2F)",r.style.border="3px solid #C62828",r.style.boxShadow="0 4px 12px rgba(244, 67, 54, 0.6)"))}if(s(e,l)){i.gameOver=!0,i.winner=i.currentPlayer;const r=i.currentPlayer===1?"Spieler 1 (Gelb)":"Spieler 2 (Rot)",a=document.getElementById("gameStatus");a&&(a.textContent=`${r} gewinnt!`,a.className="font-semibold text-yellow-400")}else if(i.moveCount===42){i.gameOver=!0,i.winner=0;const r=document.getElementById("gameStatus");r&&(r.textContent="Unentschieden!",r.className="font-semibold text-gray-400")}else i.currentPlayer=i.currentPlayer===1?2:1,d()}function s(l,e){const o=i.board[l][e],r=[[0,1],[1,0],[1,1],[1,-1]];for(const[a,c]of r){let p=1;for(let h=1;h<4;h++){const g=l+h*a,u=e+h*c;if(g>=0&&g<6&&u>=0&&u<7&&i.board[g][u]===o)p++;else break}for(let h=1;h<4;h++){const g=l-h*a,u=e-h*c;if(g>=0&&g<6&&u>=0&&u<7&&i.board[g][u]===o)p++;else break}if(p>=4)return!0}return!1}function d(){const l=document.getElementById("currentPlayerIndicator");if(l){const e=l.querySelector(".player-disc"),o=l.querySelector(".player-name");e&&o&&(i.currentPlayer===1?(e.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-yellow-400 to-yellow-600 shadow-lg",o.textContent="Spieler 1"):(e.className="player-disc w-8 h-8 rounded-full mr-3 bg-gradient-to-br from-red-500 to-red-700 shadow-lg",o.textContent="Spieler 2"))}}const m=document.getElementById("newGameBtn");m&&m.addEventListener("click",()=>{i.board=Array(6).fill(null).map(()=>Array(7).fill(0)),i.currentPlayer=1,i.gameOver=!1,i.winner=null,i.moveCount=0,document.querySelectorAll(".game-slot").forEach(o=>{const r=o.querySelector(".disc");r&&(r.classList.remove("yellow","red"),r.classList.add("empty"),r.style.background="rgba(255, 255, 255, 0.1)",r.style.border="1px solid rgba(255, 255, 255, 0.2)",r.style.boxShadow="none")});const e=document.getElementById("gameStatus");e&&(e.textContent="Spiel lÃ¤uft",e.className="font-semibold text-green-400"),d()}),d(),window.game={state:i,makeMove:n,checkWin:s}}async function b(){try{if(await initializeModularConnect4())return}catch{}try{v()}catch{const t=document.createElement("div");t.style.cssText="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #f44336; color: white; padding: 20px; border-radius: 8px; z-index: 9999; text-align: center;",t.innerHTML=`
            <h3>â Connect4 Initialization Failed</h3>
            <p>Please refresh the page or contact support.</p>
          `,document.body.appendChild(t)}}document.addEventListener("DOMContentLoaded",()=>{b()});document.readyState!=="loading"&&b();setTimeout(()=>{const i=document.getElementById("gameBoard");(i?i.querySelectorAll(".game-slot"):[]).length===0&&b()},2e3);
//# sourceMappingURL=connect4-DG8bBE23.js.map
